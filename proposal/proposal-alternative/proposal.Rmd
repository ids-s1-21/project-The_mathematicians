---
title: "Project proposal"
author: The mathematician
output: github_document
---

```{r load-packages, message = FALSE}
library(tidyverse)
library(broom)
library(dplyr)
```

*For instructions on what each section should include, please see the [project page](https://idsed.digital/assessments/project/#proposal) on the course website. Remove this text when completing your proposal*.

## 1. Introduction

This data analysis is based on the research project of Dr. George Kinnear (which is also where we get our data). The data is collected from an anonymous survey about "beliefs about mathematics" which is done by students in the School of Mathematics (including both students in the School of Mathematics or have School of Mathematics as their second school) of the University of Edinburgh in 2019/20.

Our research aims at investigating the beliefs of students toward mathematics. There are serveral sub-questions, which include:
  1. How answers are distributed between students in different schools (e.g. School of Mathematics vs. School of Informatics)?
  2. Are there any correlations between answers (e.g. whether two answers are more likely to be chosen simultaneously)?
  3. What are the general attitudes of all students toward mathematics?
  4. How is the answers from students differ from expected answers?
  
There are 2 raw data which is needed to be processed. Each of them contains different cases and variables.
  1. responses_joined (Main data to be analysed)
    The cases are surveys filled by each student.There are 677 cases. 
    There are 37 variables, these include:
      - The unique ID generated for each survey filled by student
      - The date when student completed the survey
      - The school which the student belong to
      - The gender of the student
      - The answers of student to each question (32 questions in total)
  2. maps_questions_processed.csv
    Each question would be a case. There are 32 cases in total.
    There are 5 variables in total, they are:
      - `...1`: The ID for each question automatically generated by R
      - `raw`: The raw information of the question, including question number and text
      - `qnum`: Question number
      - `expected_ans`: Expected answer for the question
      - `qtext`: The descriptive text of the question
  
## 2. Data

```{r glimpse-dataframe, echo = FALSE, warning = FALSE}
setwd("/cloud/project/data")
responses_joined <- read_csv(file = "responses_joined.csv")
glimpse(responses_joined)
```


## 3. Data analysis plan

- Variables:
Multiple outcome (y) and predictor (x) variables are needed. 

- Exploratory data analysis

1. Rename the columns:
The columns in responses_joined are the descriptive text of the question, which is very long and hard to type. Therefore, changing their names to shorter words would make the analysis later easier.

```{r change-colname}
new_col <- c()
for (i in 3:35){
  question_num <- as.character(i - 3)
  new_title <- paste("Q", question_num, sep = "")
  new_col = c(new_col, new_title)
}

names(responses_joined)[3:35] <- new_col
```

Now the names of columns indicating the answers to questions are changed to question number.
(Q0 is a question that asks students to provide consent)

2. Remove data without consent
The answer from students who refused to give consent will not be collected. Therefore, "NAs" are shown on their answers to each question. As a result, we need to remove these data, leaving only those with valid answers.

```{r remove-noconsents}
responses_joined <- responses_joined %>%
  filter(Q0 != "No, I do not consent")
```

3. Number of agrees for each question
It's good to take a quick look at how many agrees are there for each question. This could help us judge whether there is any pattern for answers to distribute.

```{r number-agree}
responses_joined %>%
  pivot_longer(cols = all_of(new_col), names_to = "question", values_to = "answer") %>%
  group_by(question) %>%
  summarise(agrees = sum(answer %in% c("Strongly Agree", "Agree"), na.rm = TRUE)) %>%
  arrange(desc(agrees))
  
```

4. Number of students in different schools.
By checking the number of students in different schools, we are able to get some knowledge on the reliability of our results. This is because if a school has a very small sample size, then the conclusion about this school generated from these samples may not be reliable.

```{r number-school}
responses_joined %>%
  group_by(programme_school_name) %>%
  summarise(student_number = n()) %>%
  filter(is.na(programme_school_name) == FALSE) %>%
  arrange(desc(student_number))

```

- Statistical methods:
In order to analyse the correlation between answers, we may need to implement some linearity test and correlation analysis. These may include using linear regression models and pearson r correlation test dependent on the situation. Although these contents are not covered yet, with some self-study it's possible for us to use them in our data analysis.

Also, we need to transfer qualitative data to quantitative data (change answers like "Strongly agree", "agree" to corresponding marks) and perform calculation on mean, standard deviation etc in order to get the distribution of the data.

